# input data, please check the directory before run the script
edgeList <- read.table("terror_network.csv", sep = ",", header = F)
colnames(edgeList) <- c("Source", "Target", "Weight")
#edgeList <- subset(edgeList,Source=='Virginia')
# simplify to remove duplicate edges
gD <- igraph::simplify(igraph::graph.data.frame(edgeList, directed=FALSE))
#gD <- igraph::graph.data.frame(edgeList,directed = FALSE)
# create node ID and username
nodeList <- data.frame(ID = c(0:(igraph::vcount(gD) - 1)), nName = igraph::V(gD)$name)
(head(nodeList))
# Map node names from the edge list to node IDs
##which() function gives you the position of elements of a logical vector that are TRUE
## Given any vertex name, its position is a row number which goes to getNodeID
## getNodeID is a function that takes a name and returns a row location -1
getNodeID <- function(x){
which(x == igraph::V(gD)$name) - 1 # to ensure that IDs start at 0
}
# add SourceName(ID) to edge source & target
edgeList <- plyr::ddply(edgeList, .variables = c("Source", "Target", "Weight"),
function (x) data.frame(SourceID = getNodeID(x$Source),
TargetID = getNodeID(x$Target)))
head(nodeList)
igraph::V(gD)
igraph::V(gD)$name
gD
